---
problem_type: file
cmdline: "tail"
title:  "Задача №1: Реализация на tail"
---
0. Условие на задачата

   0. Основна функционалност (20 точки)

      Целта на задачате е да се реализира стандартната UNIX команда `{{ page.cmdline }}`.

      Командата `{{ page.cmdline }}` се използва за показване на последните редове на файлове. От командния ред програмата получава списък от файлове и започва да ги обработва като последните 10 реда от всеки файл последователно се копират в стандартния изход (stdout), разделени със заглавна секция.

      Ако файлът съдържа по-малко от 10 реда, цялото негово съдържание се копира в стандартния изход.

      Ако командата не получи аргументи от командния ред, тя започва да чете от стандартния вход.

      Например, ако са дадени два файла със следното съдържание `a.txt`:

      ```
      one
      two
      three
      four
      five
      six
      seven
      eight
      nine
      ten
      eleven
      ```
      и b.txt:
      ```
      1234 1234
      567
      890
      ```
      то
      ```
      $ {{ page.cmdline }} a.txt b.txt
      ==> a.txt <==
      two
      three
      four
      five
      six
      seven
      eight
      nine
      ten
      eleven

      ==> b.txt <==
      1234 1234
      567
      890
      ```

      При наличието на само един аргумент, заглавната секция се пропуска.

   0. Обработка на грешки (10 точки)

      Ако някой от аргументите на `{{ page.cmdline }}` не е файл или файлът не може да се отвори, то програмата трябва да изведе съобщение на стандартната грешка (stderr). Например, ако бъдат предадени аргументи, които не са файлове
      ```
      {{ page.cmdline }} aa bb
      ```
      съобщението трябва да бъде оформено по следния начин:
      ```
      {{ page.cmdline }}: cannot open 'aa' for reading: No such file or directory
      {{ page.cmdline }}: cannot open 'bb' for reading: No such file or directory
      ```

      Ако някой от аргументите на `{{ page.cmdline }}` е файл, който не може да се прочете, то програмата трябва да изведе съобщение на стандартната грешка (stderr). Например, ако бъдат предадени аргументи, които са директории
      ```
      {{ page.cmdline }} /tmp/
      ```
      съобщението трябва да бъде оформено по следния начин:
      ```
      {{ page.cmdline }}: error reading '/tmp/': Is a directory
      ```

      Ако `{{ page.cmdline }}` не може да запише прочетеното на стандартния вход, то програмата трябва да изведе съобщение на стандартната грешка (stderr). Например, ако дискът е пълен
      ```
      {{ page.cmdline }} > /dev/full
      ```
      съобщението трябва да бъде оформено по следния начин:
      ```
      {{ page.cmdline }}: error writing: No space left on device
      ```

      Ако `{{ page.cmdline }}` не може да затвори успешно някой файл, то програмата трябва да изведе съобщение на стандартната грешка (stderr). Например
      ```
      {{ page.cmdline }} b.txt
      ```
      съобщението трябва да бъде оформено по следния начин:
      ```
      {{ page.cmdline }}: error reading 'b.txt': Input/output error
      ```

      При грешка в един файл, то изпълнението трябва да продължи към следващите (програмата не трябва да приключи).

   0. Поддръжка на стандартен вход (10 точки)

      Когато командата получи от командния ред аргумент `-`, тя трябва да интерпретира този аргумент като стандартния вход. Например командата
      ```
      {{ page.cmdline }} f1 . txt - f2 . txt
      ```
      трябва да изпълни следната последователност от действия:
         * Да копира последните 10 реда на файла f1.txt на стандартия изход.
         * Да чете редове от стандартния вход, докато не бъде затворен и да копира последните 10 реда на стандартния изход.
         * Да копира последните 10 реда на файла f2.txt на стандартия изход.

{% include requirements-cmd.md %}
